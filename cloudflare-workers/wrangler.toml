# Cloudflare Workers Configuration
name = "insu-report-ai-validator"
main = "src/index.js"
compatibility_date = "2024-11-25"

# Workers Paid Plan - 5 minutes CPU time
# Free Plan: 10ms CPU time (insufficient for AI)
# Paid Plan: configurable up to 5 minutes (300,000ms)
[limits]
cpu_ms = 300000  # 5 minutes for AI processing

# R2 Bucket Binding
[[r2_buckets]]
binding = "PDF_BUCKET"
bucket_name = "insurance-pdfs"

# Environment Variables
[vars]
ENVIRONMENT = "development"
AI_MODEL = "auto"  # Options: gemini | gpt-4o | claude | auto (ensemble)

# Secrets (set via: wrangler secret put <KEY_NAME>)
# GEMINI_API_KEY - Google Gemini API key (required)
# OPENAI_API_KEY - OpenAI API key (optional, for GPT-4o)
# ANTHROPIC_API_KEY - Anthropic API key (optional, for Claude)
# These are stored securely in Cloudflare and not in this file

# Routes (for production)
# routes = [
#   { pattern = "insu-report.com/api/*", zone_name = "insu-report.com" }
# ]

# Development
[dev]
port = 8787
